<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rental Property Profitability Estimator</title>
    <link rel="stylesheet" href="https://fcalculator.com/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Rental Property Profitability Estimator",
        "description": "Estimate rental property profitability by analyzing cash flow, ROI, cap rate, and long-term returns considering loans, expenses, and appreciation.",
        "url": "https://fcalculator.com/rental-property-calculator.html",
        "breadcrumb": {
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": 1,
                    "name": "FCalculator.com",
                    "item": "https://fcalculator.com/"
                },
                {
                    "@type": "ListItem",
                    "position": 2,
                    "name": "Financial",
                    "item": "https://fcalculator.com/financial.html"
                },
                {
                    "@type": "ListItem",
                    "position": 3,
                    "name": "Rental Property Calculator",
                    "item": "https://fcalculator.com/rental-property-calculator.html"
                }
            ]
        }
    }
    </script>
</head>
<body>
    <header>
        <div class="logo">FCalculator.com</div>
        <div class="breadcrumb">
            <a href="/">FCalculator.com</a> > <a href="/financial.html">Financial</a> > <a href="/rental-property-calculator.html">Rental Property Calculator</a>
        </div>
        <h1>Rental Property Profitability Estimator</h1>
        <p>Assess the financial viability of rental investments by projecting key performance indicators like net operating income, cash flow, return on investment, and internal rate of return over extended periods. This tool incorporates variables such as financing options, operational costs, income growth, and property value changes to provide comprehensive insights for informed decision-making.</p>
    </header>
    <main>
        <section id="calculator-section">
            <p class="instructions">Modify the values below and click Calculate to see results. All fields are required where applicable; use estimates for unknowns.</p>
            <form id="rental-form">
                <div class="calculator-container"> <!-- Wrapper for organized layout -->
                    <div class="input-grid"> <!-- Grid for sections: 2 columns on desktop, 1 on mobile -->
                        <div class="input-section purchase-section">
                            <div class="section-header">Purchase</div>
                            <div class="input-group">
                                <label for="purchase-price">Purchase Price</label>
                                <input type="number" id="purchase-price" value="200000" min="0">
                                <p class="input-help">The total acquisition cost of the property (e.g., 200000).</p>
                            </div>
                            <div class="input-group">
                                <label>Use Loan?</label>
                                <div class="radio-group">
                                    <input type="radio" id="use-loan-yes" name="use-loan" value="yes" checked>
                                    <label for="use-loan-yes">Yes</label>
                                    <input type="radio" id="use-loan-no" name="use-loan" value="no">
                                    <label for="use-loan-no">No</label>
                                </div>
                                <p class="input-help">Select if financing is used for the purchase.</p>
                            </div>
                            <div class="input-group">
                                <label for="down-payment">Down Payment (%)</label>
                                <input type="number" id="down-payment" value="20" min="0" max="100">
                                <p class="input-help">Percentage of purchase price paid initially (e.g., 20).</p>
                            </div>
                            <div class="input-group">
                                <label for="interest-rate">Interest Rate (%)</label>
                                <input type="number" id="interest-rate" value="6" min="0">
                                <p class="input-help">Annual loan interest rate (e.g., 6).</p>
                            </div>
                            <div class="input-group">
                                <label for="loan-term">Loan Term (years)</label>
                                <input type="number" id="loan-term" value="30" min="1">
                                <p class="input-help">Length of the loan in years (e.g., 30).</p>
                            </div>
                            <div class="input-group">
                                <label for="closing-cost">Closing Cost</label>
                                <input type="number" id="closing-cost" value="6000" min="0">
                                <p class="input-help">Fees associated with closing the deal (e.g., 6000).</p>
                            </div>
                            <div class="input-group">
                                <label>Need Repairs?</label>
                                <div class="radio-group">
                                    <input type="radio" id="need-repairs-yes" name="need-repairs" value="yes">
                                    <label for="need-repairs-yes">Yes</label>
                                    <input type="radio" id="need-repairs-no" name="need-repairs" value="no" checked>
                                    <label for="need-repairs-no">No</label>
                                </div>
                                <p class="input-help">Indicate if initial repairs are required.</p>
                            </div>
                            <div class="input-group" id="repair-cost-group" style="display: none;">
                                <label for="repair-cost">Repair Cost</label>
                                <input type="number" id="repair-cost" value="0" min="0">
                                <p class="input-help">Estimated cost for repairs if needed (e.g., 10000).</p>
                            </div>
                        </div>

                        <div class="input-section income-section">
                            <div class="section-header">Income</div>
                            <div class="input-group increase-group">
                                <label>Annual Increase (%)</label>
                            </div>
                            <div class="input-group dual-input">
                                <label for="monthly-rent">Monthly Rent</label>
                                <input type="number" id="monthly-rent" value="2000" min="0">
                                <input type="number" id="rent-increase" value="3" min="0">
                                <p class="input-help">Base monthly rent and its annual growth rate (e.g., 2000 and 3).</p>
                            </div>
                            <div class="input-group dual-input">
                                <label for="other-monthly-income">Other Monthly Income</label>
                                <input type="number" id="other-monthly-income" value="0" min="0">
                                <input type="number" id="other-income-increase" value="3" min="0">
                                <p class="input-help">Additional income sources and growth (e.g., 0 and 3).</p>
                            </div>
                            <div class="input-group">
                                <label for="vacancy-rate">Vacancy Rate (%)</label>
                                <input type="number" id="vacancy-rate" value="5" min="0" max="100">
                                <p class="input-help">Expected percentage of time the property is vacant (e.g., 5).</p>
                            </div>
                            <div class="input-group">
                                <label for="management-fee">Management Fee (%)</label>
                                <input type="number" id="management-fee" value="0" min="0" max="100">
                                <p class="input-help">Percentage fee for management services (e.g., 0).</p>
                            </div>
                        </div>

                        <div class="input-section expenses-section">
                            <div class="section-header">Recurring Operating Expenses</div>
                            <div class="input-group increase-group">
                                <label>Annual</label>
                                <label>Annual Increase (%)</label>
                            </div>
                            <div class="input-group dual-input">
                                <label for="property-tax">Property Tax (Annual)</label>
                                <input type="number" id="property-tax" value="3000" min="0">
                                <input type="number" id="tax-increase" value="3" min="0">
                                <p class="input-help">Annual property tax and growth rate (e.g., 3000 and 3).</p>
                            </div>
                            <div class="input-group dual-input">
                                <label for="total-insurance">Total Insurance (Annual)</label>
                                <input type="number" id="total-insurance" value="1200" min="0">
                                <input type="number" id="insurance-increase" value="3" min="0">
                                <p class="input-help">Annual insurance cost and growth (e.g., 1200 and 3).</p>
                            </div>
                            <div class="input-group dual-input">
                                <label for="hoa-fee">HOA Fee (Annual)</label>
                                <input type="number" id="hoa-fee" value="0" min="0">
                                <input type="number" id="hoa-increase" value="3" min="0">
                                <p class="input-help">Homeowners association fees and growth (e.g., 0 and 3).</p>
                            </div>
                            <div class="input-group dual-input">
                                <label for="maintenance">Maintenance (Annual)</label>
                                <input type="number" id="maintenance" value="2000" min="0">
                                <input type="number" id="maintenance-increase" value="3" min="0">
                                <p class="input-help">Annual maintenance expenses and growth (e.g., 2000 and 3).</p>
                            </div>
                            <div class="input-group dual-input">
                                <label for="other-costs">Other Costs (Annual)</label>
                                <input type="number" id="other-costs" value="500" min="0">
                                <input type="number" id="other-costs-increase" value="3" min="0">
                                <p class="input-help">Miscellaneous annual costs and growth (e.g., 500 and 3).</p>
                            </div>
                        </div>

                        <div class="input-section sell-section">
                            <div class="section-header">Sell</div>
                            <div class="input-group">
                                <label>Do You Know the Sell Price?</label>
                                <div class="radio-group">
                                    <input type="radio" id="know-sell-yes" name="know-sell" value="yes">
                                    <label for="know-sell-yes">Yes</label>
                                    <input type="radio" id="know-sell-no" name="know-sell" value="no" checked>
                                    <label for="know-sell-no">No</label>
                                </div>
                                <p class="input-help">Select if you have a specific sell price in mind.</p>
                            </div>
                            <div class="input-group" id="sell-price-group">
                                <label for="sell-price">Sell Price (if known)</label>
                                <input type="number" id="sell-price" value="0" min="0" disabled>
                                <p class="input-help">Expected selling price if known (e.g., 250000).</p>
                            </div>
                            <div class="input-group">
                                <label for="value-appreciation">Value Appreciation (% per year)</label>
                                <input type="number" id="value-appreciation" value="3" min="0">
                                <p class="input-help">Annual property value growth rate (e.g., 3).</p>
                            </div>
                            <div class="input-group">
                                <label for="holding-length">Holding Length (years)</label>
                                <input type="number" id="holding-length" value="20" min="1">
                                <p class="input-help">Duration you plan to hold the property (e.g., 20).</p>
                            </div>
                            <div class="input-group">
                                <label for="cost-to-sell">Cost to Sell (%)</label>
                                <input type="number" id="cost-to-sell" value="8" min="0" max="100">
                                <p class="input-help">Selling costs as percentage of sell price (e.g., 8).</p>
                            </div>
                        </div>
                    </div>

                    <div class="currency-group">
                        <label for="currency">Currency</label>
                        <select id="currency">
                            <option value="$" selected>$</option>
                            <option value="€">€</option>
                        </select>
                        <p class="input-help">Select currency for display purposes.</p>
                    </div>

                    <div class="button-group">
                        <button type="button" onclick="calculate()">Calculate</button>
                        <button type="button" onclick="clearForm()">Clear</button>
                    </div>
                </div>
            </form>

            <div id="results" style="text-align: center; font-size: 1.5em; color: green; display: none;">
                <h2>Results</h2>
                <p id="monthly-cash-flow"></p>
                <p id="annual-cash-flow"></p>
                <p id="cap-rate"></p>
                <p id="cash-on-cash"></p>
                <p id="roi"></p>
                <p id="irr"></p>
                <p id="payoff-date"></p>
                <canvas id="amortization-chart" width="400" height="200" style="display: none; margin: 20px auto;"></canvas>
                <button onclick="saveAsPDF()">Save as PDF</button>
            </div>
            <button onclick="sharePage()" style="display: block; margin: 20px auto; font-size: 0.8em;">Share this page</button>
        </section>

        <section id="description">
            <h2>Insights into Rental Property Analysis</h2>
            <p>Rental properties represent a significant investment opportunity, offering potential for passive income, tax advantages, and capital appreciation. However, success depends on thorough evaluation of financial metrics to mitigate risks associated with market fluctuations, tenant issues, and maintenance demands. This estimator simulates various scenarios to highlight profitability drivers.</p>

            <h3>Essential Formulas</h3>
            <p>Net Operating Income (NOI):</p>
            \[ \text{NOI} = (\text{Gross Income} \times (1 - \text{Vacancy Rate})) \times (1 - \text{Management Fee}) - \text{Operating Expenses} \]
            <p>Capitalization Rate (Cap Rate):</p>
            \[ \text{Cap Rate} = \frac{\text{NOI}}{\text{Property Value}} \times 100\% \]
            <p>Annual Cash Flow:</p>
            \[ \text{Annual Cash Flow} = \text{NOI} - \text{Debt Service} \]
            <p>Cash on Cash Return:</p>
            \[ \text{Cash on Cash Return} = \frac{\text{Annual Cash Flow}}{\text{Total Cash Invested}} \times 100\% \]
            <p>Return on Investment (ROI):</p>
            \[ \text{ROI} = \frac{\text{Net Proceeds from Sale + Cumulative Cash Flow}}{\text{Initial Investment}} \times 100\% \]

            <h3>Usage Guidelines</h3>
            <p>Input purchase details, expected income streams, recurring costs, and exit strategy assumptions. The tool projects outcomes across the holding period, adjusting for inflation-like increases and vacancy. For financed properties, view the amortization chart for payment breakdown.</p>

            <h3>Disclaimer</h3>
            <p>Results are based on provided assumptions and standard calculations. They do not constitute financial, legal, or investment advice. Actual performance may differ due to economic changes, regulatory shifts, or unexpected events. Consult qualified professionals before making decisions.</p>

            <h3>FAQ</h3>
            <ul>
                <li><strong>What cap rate indicates a strong investment?</strong> Generally 5-10%, varying by market and property type; higher rates suggest better income potential but possibly higher risk.</li>
                <li><strong>How is vacancy rate applied?</strong> It reduces gross income proportionally to account for unoccupied periods.</li>
                <li><strong>Why include appreciation?</strong> It estimates future sell price if unknown, impacting overall ROI.</li>
                <li><strong>Can this handle multiple units?</strong> Aggregate rents and expenses for multi-unit properties in the inputs.</li>
            </ul>

            <h3>Metric Comparison Table</h3>
            <table>
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>Purpose</th>
                        <th>Benchmark Range</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Cap Rate</td>
                        <td>Measures income efficiency</td>
                        <td>5-12%</td>
                    </tr>
                    <tr>
                        <td>Cash on Cash</td>
                        <td>Evaluates return on cash input</td>
                        <td>6-15%</td>
                    </tr>
                    <tr>
                        <td>ROI (Annualized)</td>
                        <td>Overall profitability including sale</td>
                        <td>8-20%</td>
                    </tr>
                    <tr>
                        <td>IRR</td>
                        <td>Time-weighted return rate</td>
                        <td>10-25%</td>
                    </tr>
                </tbody>
            </table>

            <p>Explore further concepts at <a href="https://en.wikipedia.org/wiki/Real_estate_investment_trust" target="_blank">Wikipedia on Real Estate Investment</a> or <a href="https://www.investopedia.com/terms/c/caprate.asp" target="_blank">Investopedia Cap Rate Explanation</a>.</p>

            <p>Related tools on our site: <a href="/mortgage-calculator.html">Mortgage Payment Forecaster</a>, <a href="/loan-calculator.html">Personal Loan Simulator</a>, <a href="/compound-interest-growth-calculator.html">Investment Growth Projector</a>.</p>
        </section>

        <section id="related-resources">
            <h2>Related Resources</h2>
            <ul>
                <li><a href="https://www.hud.gov/topics/rental_assistance" target="_blank">HUD Rental Assistance Programs</a></li>
                <li><a href="https://www.epa.gov/sites/production/files/2015-08/documents/mgwc-rr1.pdf" target="_blank">EPA Rental Property Management Guide (PDF)</a></li>
                <li><a href="https://www.investopedia.com/terms/i/internal-rate-of-return-rule.asp" target="_blank">Investopedia on IRR for Investments</a></li>
                <li><a href="https://www.irs.gov/taxtopics/tc414" target="_blank">IRS Rental Income and Expenses</a></li>
            </ul>
        </section>
    </main>
    <footer>
        <p>Project created by Ivan Brkic. Project launched in 2020. Version 1.02</p>
        <a href="/sitemap.html">sitemap</a> <a href="/about.html">about us</a> <a href="/contact.html">contact us</a> <a href="/terms.html">terms of use</a> <a href="/privacy.html">privacy policy</a>
    </footer>

    <script>
        let amortizationData = [];
        let currencySymbol = '$';

        // Event listeners for conditional inputs
        document.querySelectorAll('input[name="need-repairs"]').forEach(radio => {
            radio.addEventListener('change', () => {
                document.getElementById('repair-cost-group').style.display = radio.value === 'yes' ? 'block' : 'none';
            });
        });

        document.querySelectorAll('input[name="know-sell"]').forEach(radio => {
            radio.addEventListener('change', () => {
                document.getElementById('sell-price').disabled = radio.value !== 'yes';
            });
        });

        function calculate() {
            // Inputs parsing (same as before, with addition for repair cost)
            const purchasePrice = parseFloat(document.getElementById('purchase-price').value);
            const useLoan = document.querySelector('input[name="use-loan"]:checked').value === 'yes';
            const downPaymentPct = parseFloat(document.getElementById('down-payment').value) / 100;
            const interestRate = parseFloat(document.getElementById('interest-rate').value) / 100 / 12;
            const loanTerm = parseFloat(document.getElementById('loan-term').value);
            const loanTermMonths = loanTerm * 12;
            const closingCost = parseFloat(document.getElementById('closing-cost').value);
            const needRepairs = document.querySelector('input[name="need-repairs"]:checked').value === 'yes';
            const repairCost = needRepairs ? parseFloat(document.getElementById('repair-cost').value) : 0;

            const monthlyRent = parseFloat(document.getElementById('monthly-rent').value);
            const rentIncrease = parseFloat(document.getElementById('rent-increase').value) / 100;
            const otherMonthly = parseFloat(document.getElementById('other-monthly-income').value);
            const otherIncrease = parseFloat(document.getElementById('other-income-increase').value) / 100;
            const vacancyRate = parseFloat(document.getElementById('vacancy-rate').value) / 100;
            const managementFee = parseFloat(document.getElementById('management-fee').value) / 100;

            const propertyTax = parseFloat(document.getElementById('property-tax').value);
            const taxIncrease = parseFloat(document.getElementById('tax-increase').value) / 100;
            const insurance = parseFloat(document.getElementById('total-insurance').value);
            const insuranceIncrease = parseFloat(document.getElementById('insurance-increase').value) / 100;
            const hoa = parseFloat(document.getElementById('hoa-fee').value);
            const hoaIncrease = parseFloat(document.getElementById('hoa-increase').value) / 100;
            const maintenance = parseFloat(document.getElementById('maintenance').value);
            const maintenanceIncrease = parseFloat(document.getElementById('maintenance-increase').value) / 100;
            const otherCosts = parseFloat(document.getElementById('other-costs').value);
            const otherCostsIncrease = parseFloat(document.getElementById('other-costs-increase').value) / 100;

            const knowSell = document.querySelector('input[name="know-sell"]:checked').value === 'yes';
            let sellPrice = knowSell ? parseFloat(document.getElementById('sell-price').value) : 0;
            const appreciation = parseFloat(document.getElementById('value-appreciation').value) / 100;
            const holdingYears = parseFloat(document.getElementById('holding-length').value);
            const costToSellPct = parseFloat(document.getElementById('cost-to-sell').value) / 100;

            currencySymbol = document.getElementById('currency').value;

            // Initial Investment
            const downPayment = purchasePrice * downPaymentPct;
            const loanAmount = useLoan ? purchasePrice - downPayment : 0;
            const initialInvestment = downPayment + closingCost + repairCost;

            // Loan calculations
            let monthlyPayment = 0;
            let totalInterest = 0;
            amortizationData = [];
            let payoffDate = '';
            if (useLoan && loanAmount > 0 && interestRate > 0 && loanTermMonths > 0) {
                const p = loanAmount;
                const r = interestRate;
                const n = loanTermMonths;
                monthlyPayment = p * r * Math.pow(1 + r, n) / (Math.pow(1 + r, n) - 1);
                let balance = p;
                let totalPayments = monthlyPayment * n;
                totalInterest = totalPayments - p;

                // Amortization
                for (let month = 1; month <= n; month++) {
                    const interest = balance * r;
                    const principal = monthlyPayment - interest;
                    balance -= principal;
                    amortizationData.push([month, monthlyPayment.toFixed(2), principal.toFixed(2), interest.toFixed(2), balance.toFixed(2)]);
                }

                // Payoff date (from current date: August 11, 2025, New York time)
                const currentDate = new Date(2025, 7, 11); // Month 7 is August (0-indexed)
                const payoffYear = currentDate.getFullYear() + loanTerm;
                const payoffMonth = currentDate.getMonth();
                const payoffDay = currentDate.getDate();
                payoffDate = new Date(payoffYear, payoffMonth, payoffDay).toDateString();

                // Chart
                const ctx = document.getElementById('amortization-chart').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: amortizationData.map(row => row[0]),
                        datasets: [{
                            label: 'Loan Balance Over Time',
                            data: amortizationData.map(row => row[4]),
                            borderColor: 'blue',
                            fill: false
                        }]
                    },
                    options: { scales: { y: { beginAtZero: true } } }
                });
                document.getElementById('amortization-chart').style.display = 'block';
            }

            // Projections over years (same as before)
            let totalCashFlow = 0;
            let currentRent = monthlyRent;
            let currentOther = otherMonthly;
            let currentTax = propertyTax;
            let currentIns = insurance;
            let currentHoa = hoa;
            let currentMaint = maintenance;
            let currentOtherCosts = otherCosts;
            let currentValue = purchasePrice;

            for (let year = 1; year <= holdingYears; year++) {
                const grossIncome = (currentRent + currentOther) * 12 * (1 - vacancyRate);
                const effectiveIncome = grossIncome * (1 - managementFee);
                const expenses = currentTax + currentIns + currentHoa + currentMaint + currentOtherCosts;
                const noi = effectiveIncome - expenses;
                const debtService = useLoan ? monthlyPayment * 12 : 0;
                const annualCashFlow = noi - debtService;
                totalCashFlow += annualCashFlow;

                currentRent *= (1 + rentIncrease);
                currentOther *= (1 + otherIncrease);
                currentTax *= (1 + taxIncrease);
                currentIns *= (1 + insuranceIncrease);
                currentHoa *= (1 + hoaIncrease);
                currentMaint *= (1 + maintenanceIncrease);
                currentOtherCosts *= (1 + otherCostsIncrease);
                currentValue *= (1 + appreciation);
            }

            // Sell calculations
            if (!knowSell) sellPrice = currentValue;
            const netSell = sellPrice * (1 - costToSellPct) - (useLoan ? parseFloat(amortizationData[amortizationData.length - 1][4]) : 0);
            const netProfit = netSell - purchasePrice + totalCashFlow;

            // Metrics
            const firstGross = (monthlyRent + otherMonthly) * 12 * (1 - vacancyRate);
            const firstEffective = firstGross * (1 - managementFee);
            const firstExpenses = propertyTax + insurance + hoa + maintenance + otherCosts;
            const firstNOI = firstEffective - firstExpenses;
            const capRate = (firstNOI / purchasePrice) * 100;
            const firstCashFlow = firstNOI - (useLoan ? monthlyPayment * 12 : 0);
            const cashOnCash = (firstCashFlow / initialInvestment) * 100;
            const roi = (netProfit / initialInvestment) * 100 / holdingYears;
            const irr = calculateIRR([-initialInvestment, ...Array(holdingYears).fill(firstCashFlow).slice(0, holdingYears - 1), firstCashFlow + netSell]);

            // Display results
            document.getElementById('monthly-cash-flow').innerText = `Monthly Cash Flow: ${currencySymbol}${ (firstCashFlow / 12).toFixed(2) }`;
            document.getElementById('annual-cash-flow').innerText = `Annual Cash Flow: ${currencySymbol}${ firstCashFlow.toFixed(2) }`;
            document.getElementById('cap-rate').innerText = `Cap Rate: ${capRate.toFixed(2)}%`;
            document.getElementById('cash-on-cash').innerText = `Cash on Cash Return: ${cashOnCash.toFixed(2)}%`;
            document.getElementById('roi').innerText = `Annualized ROI: ${roi.toFixed(2)}%`;
            document.getElementById('irr').innerText = `IRR: ${irr.toFixed(2)}%`;
            document.getElementById('payoff-date').innerText = useLoan ? `Payoff Date: ${payoffDate}` : '';
            document.getElementById('results').style.display = 'block';
        }

        function calculateIRR(cashFlows) {
            const maxIter = 100;
            let guess = 0.1;
            for (let i = 0; i < maxIter; i++) {
                let npv = 0;
                let dnpv = 0;
                for (let t = 0; t < cashFlows.length; t++) {
                    npv += cashFlows[t] / Math.pow(1 + guess, t);
                    dnpv -= t * cashFlows[t] / Math.pow(1 + guess, t + 1);
                }
                if (dnpv === 0) break;
                guess -= npv / dnpv;
            }
            return guess * 100;
        }

        function clearForm() {
            document.getElementById('rental-form').reset();
            document.getElementById('results').style.display = 'none';
            document.getElementById('amortization-chart').style.display = 'none';
            document.getElementById('repair-cost-group').style.display = 'none';
            document.getElementById('sell-price').disabled = true;
        }

        function saveAsPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFont('helvetica');
            doc.setFontSize(14);
            doc.text('Rental Property Calculation Results', 105, 15, { align: 'center' });

            doc.autoTable({
                startY: 20,
                head: [['Parameter', 'Value']],
                body: [
                    ['Monthly Cash Flow', document.getElementById('monthly-cash-flow').textContent.split(': ')[1]],
                    ['Annual Cash Flow', document.getElementById('annual-cash-flow').textContent.split(': ')[1]],
                    ['Cap Rate', document.getElementById('cap-rate').textContent.split(': ')[1]],
                    ['Cash on Cash Return', document.getElementById('cash-on-cash').textContent.split(': ')[1]],
                    ['Annualized ROI', document.getElementById('roi').textContent.split(': ')[1]],
                    ['IRR', document.getElementById('irr').textContent.split(': ')[1]],
                    ['Payoff Date', document.getElementById('payoff-date').textContent.split(': ')[1] || 'N/A']
                ],
                theme: 'grid',
                headStyles: { fillColor: [0, 200, 200], textColor: [255, 255, 255] },
                alternateRowStyles: { fillColor: [255, 255, 255] },
                styles: { lineColor: [200, 200, 200], lineWidth: 0.1, cellPadding: 5, font: 'helvetica', halign: 'left' },
                margin: { top: 10 }
            });

            if (amortizationData.length > 0) {
                doc.autoTable({
                    startY: doc.lastAutoTable.finalY + 10,
                    head: [['Month', 'Payment', 'Principal', 'Interest', 'Balance']],
                    body: amortizationData,
                    theme: 'grid',
                    headStyles: { fillColor: [0, 200, 200], textColor: [255, 255, 255] },
                    alternateRowStyles: { fillColor: [245, 245, 245] },
                    styles: { lineColor: [200, 200, 200], lineWidth: 0.1, cellPadding: 5, font: 'helvetica', halign: 'left' },
                    didDrawPage: function (data) {
                        doc.setFontSize(10);
                        doc.setTextColor(100);
                        doc.text('This document was generated using Fcalculator.com', doc.internal.pageSize.width / 2, doc.internal.pageSize.height - 10, { align: 'center' });
                    }
                });
            } else {
                doc.setFontSize(10);
                doc.setTextColor(100);
                doc.text('This document was generated using Fcalculator.com', doc.internal.pageSize.width / 2, doc.internal.pageSize.height - 10, { align: 'center' });
            }

            doc.save('rental-property-results.pdf');
        }

        function sharePage() {
            if (navigator.share) {
                navigator.share({
                    title: 'Rental Property Profitability Estimator',
                    url: window.location.href
                });
            } else {
                alert('Share this page manually.');
            }
        }
    </script>
</body>
</html>
