<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rental Property ROI Calculator | FCalculator.com</title>
    <link rel="stylesheet" href="https://fcalculator.com/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.20/jspdf.plugin.autotable.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Rental Property ROI Calculator",
        "description": "Calculate returns on rental property investments with detailed cash flow projections, ROI, cap rate, IRR, and amortization schedules, including repair costs and appreciation.",
        "url": "https://fcalculator.com/rental-property-roi-simulator.html",
        "breadcrumb": {
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": 1,
                    "name": "Home",
                    "item": "https://fcalculator.com/"
                },
                {
                    "@type": "ListItem",
                    "position": 2,
                    "name": "Financial",
                    "item": "https://fcalculator.com/financial.html"
                },
                {
                    "@type": "ListItem",
                    "position": 3,
                    "name": "Rental Property ROI Calculator",
                    "item": "https://fcalculator.com/rental-property-roi-simulator.html"
                }
            ]
        }
    }
    </script>
</head>
<body>
    <header>
        <div class="logo">FCalculator.com</div>
        <div class="breadcrumb">
            <a href="/">FCalculator.com</a> > <a href="/financial.html">Financial</a> > <a href="/rental-property-roi-simulator.html">Rental Property ROI Calculator</a>
        </div>
        <h1>Rental Property ROI Calculator</h1>
        <p>Analyze potential returns from rental properties with detailed projections for cash flow, ROI, cap rate, IRR, and property value appreciation.</p>
    </header>

    <main>
        <section class="tool-section">
            <form id="rental-form">
                <label for="currency">Currency:</label>
                <select id="currency">
                    <option value="$" selected>$</option>
                    <option value="€">€</option>
                </select>

                <fieldset>
                    <legend>Purchase</legend>
                    <label for="property-price">Purchase Price</label>
                    <input type="number" id="property-price" value="250000" required>

                    <label for="closing-cost">Closing Cost</label>
                    <input type="number" id="closing-cost" value="5000" required>

                    <label for="use-loan">Use Loan?</label>
                    <select id="use-loan">
                        <option value="yes" selected>Yes</option>
                        <option value="no">No</option>
                    </select>

                    <label for="down-payment">Down Payment (%)</label>
                    <input type="number" id="down-payment" min="0" max="100" value="20" required>

                    <label for="interest-rate">Annual Interest Rate (%)</label>
                    <input type="number" id="interest-rate" step="0.01" value="4.5" required>

                    <label for="loan-term">Loan Term (Years)</label>
                    <input type="number" id="loan-term" value="30" required>
                </fieldset>

                <fieldset>
                    <legend>Repairs</legend>
                    <label for="need-repairs">Need Repairs?</label>
                    <select id="need-repairs">
                        <option value="no" selected>No</option>
                        <option value="yes">Yes</option>
                    </select>

                    <label for="repair-cost">Repair Cost</label>
                    <input type="number" id="repair-cost" value="10000" required>

                    <label for="after-repair-value">Value After Repairs</label>
                    <input type="number" id="after-repair-value" value="270000" required>
                </fieldset>

                <fieldset>
                    <legend>Recurring Operating Expenses</legend>
                    <label for="annual-taxes">Annual Property Taxes</label>
                    <input type="number" id="annual-taxes" value="3000" required>
                    <label for="taxes-increase">Annual Increase (%)</label>
                    <input type="number" id="taxes-increase" value="3" step="0.1" required>

                    <label for="annual-insurance">Annual Insurance</label>
                    <input type="number" id="annual-insurance" value="1200" required>
                    <label for="insurance-increase">Annual Increase (%)</label>
                    <input type="number" id="insurance-increase" value="3" step="0.1" required>

                    <label for="hoa-fee">HOA Fee (Monthly)</label>
                    <input type="number" id="hoa-fee" value="100" required>
                    <label for="hoa-increase">Annual Increase (%)</label>
                    <input type="number" id="hoa-increase" value="3" step="0.1" required>

                    <label for="monthly-maintenance">Monthly Maintenance (% of Rent)</label>
                    <input type="number" id="monthly-maintenance" min="0" max="100" value="10" required>
                    <label for="maintenance-increase">Annual Increase (%)</label>
                    <input type="number" id="maintenance-increase" value="3" step="0.1" required>

                    <label for="other-costs">Other Monthly Costs</label>
                    <input type="number" id="other-costs" value="50" required>
                    <label for="other-costs-increase">Annual Increase (%)</label>
                    <input type="number" id="other-costs-increase" value="3" step="0.1" required>
                </fieldset>

                <fieldset>
                    <legend>Income</legend>
                    <label for="monthly-rent">Monthly Rent</label>
                    <input type="number" id="monthly-rent" value="1500" required>
                    <label for="rent-increase">Annual Increase (%)</label>
                    <input type="number" id="rent-increase" value="3" step="0.1" required>

                    <label for="other-income">Other Monthly Income</label>
                    <input type="number" id="other-income" value="0" required>
                    <label for="other-income-increase">Annual Increase (%)</label>
                    <input type="number" id="other-income-increase" value="3" step="0.1" required>

                    <label for="vacancy-rate">Vacancy Rate (%)</label>
                    <input type="number" id="vacancy-rate" min="0" max="100" value="5" required>

                    <label for="management-fee">Management Fee (% of Rent)</label>
                    <input type="number" id="management-fee" min="0" max="100" value="8" required>
                </fieldset>

                <fieldset>
                    <legend>Sell</legend>
                    <label for="know-sell-price">Do You Know the Sell Price?</label>
                    <select id="know-sell-price">
                        <option value="no" selected>No</option>
                        <option value="yes">Yes</option>
                    </select>

                    <label for="appreciation">Value Appreciation (% per Year)</label>
                    <input type="number" id="appreciation" step="0.1" value="3" required>

                    <label for="sell-price">Sell Price</label>
                    <input type="number" id="sell-price" value="400000" required>

                    <label for="holding-length">Holding Length (Years)</label>
                    <input type="number" id="holding-length" value="20" required>

                    <label for="sell-cost">Cost to Sell (%)</label>
                    <input type="number" id="sell-cost" min="0" max="100" value="8" required>
                </fieldset>

                <button type="button" onclick="calculateRental()">Calculate</button>
            </form>

            <div id="results" style="text-align: center; font-size: 1.5em; color: green;">
                <p id="monthly-mortgage">Monthly Mortgage: $957.87</p>
                <p id="monthly-cash-flow">Monthly Cash Flow: $117.63</p>
                <p id="cap-rate">Cap Rate: 4.18%</p>
                <p id="annual-roi">Annual ROI: 2.82%</p>
                <p id="irr">Internal Rate of Return (IRR): 8.12%</p>
                <p id="total-return">Total Return Over Term: $250258.80</p>
            </div>

            <canvas id="expenseChart" width="400" height="200"></canvas>
            <canvas id="cashFlowChart" width="400" height="200"></canvas>
            <canvas id="valueChart" width="400" height="200"></canvas>
            <canvas id="noiChart" width="400" height="200"></canvas>
            <canvas id="roiComponentsChart" width="400" height="200"></canvas>

            <table id="amortization-table" style="margin: 20px auto;">
                <thead>
                    <tr>
                        <th>Year</th>
                        <th>Principal Paid</th>
                        <th>Interest Paid</th>
                        <th>Balance</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>

            <button onclick="saveAsPDF()" id="pdf-button">Save as PDF</button>
            <button onclick="sharePage()" class="share-button">Share this page</button>
        </section>

        <section class="content-section">
            <h2>Understanding Rental Property Investments</h2>
            <p>Rental properties offer a dual benefit of steady rental income and potential long-term appreciation. This calculator enables you to evaluate investment viability by factoring in purchase costs, financing, operating expenses, and future sale proceeds. By inputting variables like down payment, interest rates, and annual increases, you can simulate various scenarios to understand cash flow dynamics and overall profitability.</p>
            <p>The monthly mortgage payment is calculated using the amortization formula:</p>
            \[ M = P \frac{r(1+r)^n}{(1+r)^n - 1} \]
            <p>Where \( M \) is the monthly payment, \( P \) is the loan principal, \( r \) is the monthly interest rate, and \( n \) is the number of payments.</p>

            <h3>Key Metrics Explained</h3>
            <ul>
                <li><strong>Cash Flow</strong>: Monthly rent minus all expenses (mortgage, taxes, insurance, HOA, maintenance, management, vacancy).</li>
                <li><strong>Cap Rate</strong>: Net Operating Income (NOI) divided by property value: \( \text{Cap Rate} = \frac{\text{NOI}}{\text{Property Value}} \).</li>
                <li><strong>ROI</strong>: Annual net income divided by initial investment: \( \text{ROI} = \frac{\text{Annual Net Income}}{\text{Initial Investment}} \times 100 \).</li>
                <li><strong>IRR</strong>: The rate at which the net present value of cash flows equals zero, reflecting the investment’s overall profitability over time.</li>
            </ul>

            <h3>Factors Impacting Returns</h3>
            <table>
                <thead>
                    <tr>
                        <th>Factor</th>
                        <th>Impact</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Appreciation</td>
                        <td>Increases potential profit upon sale but is speculative and depends on market trends.</td>
                    </tr>
                    <tr>
                        <td>Management Fees</td>
                        <td>Reduces cash flow but saves time for passive investors, often ranging from 8-12% of rent.</td>
                    </tr>
                    <tr>
                        <td>Closing and Repair Costs</td>
                        <td>Increases initial investment, lowering short-term ROI but potentially boosting long-term value.</td>
                    </tr>
                    <tr>
                        <td>Annual Increases</td>
                        <td>Accounts for inflation in expenses and income, providing realistic multi-year projections.</td>
                    </tr>
                </tbody>
            </table>

            <h3>Investment Strategies Comparison</h3>
            <table>
                <thead>
                    <tr>
                        <th>Strategy</th>
                        <th>Pros</th>
                        <th>Cons</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Buy and Hold</td>
                        <td>Stable income and appreciation over time</td>
                        <td>Requires active management and ties up capital</td>
                    </tr>
                    <tr>
                        <td>Fix and Flip</td>
                        <td>High short-term gains from repairs and quick sales</td>
                        <td>Risky due to market volatility and unexpected costs</td>
                    </tr>
                    <tr>
                        <td>REITs</td>
                        <td>Passive investment with diversification</td>
                        <td>Limited control over assets and lower personalized returns</td>
                    </tr>
                    <tr>
                        <td>Short-Term Rentals</td>
                        <td>Higher income potential in tourist areas</td>
                        <td>Higher vacancy rates and regulatory challenges</td>
                    </tr>
                </tbody>
            </table>

            <p>Learn more about real estate investing from trusted sources like <a href="https://en.wikipedia.org/wiki/Real_estate_investing" target="_blank">Wikipedia</a> or <a href="https://www.hud.gov/topics/rental_assistance" target="_blank">U.S. Department of Housing and Urban Development</a>.</p>

            <h3>Disclaimer</h3>
            <p>This calculator provides estimates based on user inputs and does not constitute financial advice. Consult a professional advisor for personalized guidance. Actual results may vary due to market conditions, unexpected costs, or regulatory changes.</p>

            <h3>FAQ</h3>
            <ul>
                <li><strong>What is a good cap rate?</strong> Typically 5-10%, depending on location and risk tolerance.</li>
                <li><strong>How does appreciation affect ROI?</strong> It boosts returns upon sale but isn’t guaranteed; use conservative estimates for projections.</li>
                <li><strong>Related tools:</strong> Explore our <a href="/mortgage-calculator.html">Mortgage Calculator</a> or <a href="/compound-interest-growth-calculator.html">Compound Interest Calculator</a>.</li>
            </ul>
        </section>

        <section class="related-resources">
            <h2>Related Resources</h2>
            <ul>
                <li><a href="https://www.investopedia.com/terms/r/realestate.asp" target="_blank">Investopedia on Real Estate</a></li>
                <li><a href="https://www.census.gov/topics/housing.html" target="_blank">U.S. Census Bureau Housing Data</a></li>
                <li><a href="https://ec.europa.eu/info/topics/single-market/services/services-goods/real-estate_en" target="_blank">EU Real Estate Information</a></li>
            </ul>
        </section>
    </main>

    <footer>
        Project created by Ivan Brkic. Project launched in 2020. Version 1.02
        <div class="footer-links">
            <a href="/sitemap.html">sitemap</a> <a href="/about.html">about us</a> <a href="/contact.html">contact us</a> <a href="/terms.html">terms of use</a> <a href="/privacy.html">privacy policy</a>
        </div>
    </footer>

    <script>
        let amortizationData = [];
        let expenseData = [];
        let cashFlowData = [];
        let valueData = [];
        let noiData = [];
        let roiComponentsData = [];

        function calculateRental() {
            const currency = document.getElementById('currency').value;
            const price = parseFloat(document.getElementById('property-price').value);
            const closingCost = parseFloat(document.getElementById('closing-cost').value);
            const useLoan = document.getElementById('use-loan').value === 'yes';
            const downPct = useLoan ? parseFloat(document.getElementById('down-payment').value) / 100 : 1;
            const rate = useLoan ? parseFloat(document.getElementById('interest-rate').value) / 100 / 12 : 0;
            const term = useLoan ? parseInt(document.getElementById('loan-term').value) * 12 : 1;
            const needRepairs = document.getElementById('need-repairs').value === 'yes';
            const repairCost = needRepairs ? parseFloat(document.getElementById('repair-cost').value) : 0;
            const afterRepairValue = needRepairs ? parseFloat(document.getElementById('after-repair-value').value) : price;
            const taxes = parseFloat(document.getElementById('annual-taxes').value) / 12;
            const taxesIncrease = parseFloat(document.getElementById('taxes-increase').value) / 100;
            const insurance = parseFloat(document.getElementById('annual-insurance').value) / 12;
            const insuranceIncrease = parseFloat(document.getElementById('insurance-increase').value) / 100;
            const hoa = parseFloat(document.getElementById('hoa-fee').value);
            const hoaIncrease = parseFloat(document.getElementById('hoa-increase').value) / 100;
            const maintPct = parseFloat(document.getElementById('monthly-maintenance').value) / 100;
            const maintIncrease = parseFloat(document.getElementById('maintenance-increase').value) / 100;
            const otherCosts = parseFloat(document.getElementById('other-costs').value);
            const otherCostsIncrease = parseFloat(document.getElementById('other-costs-increase').value) / 100;
            const rent = parseFloat(document.getElementById('monthly-rent').value);
            const rentIncrease = parseFloat(document.getElementById('rent-increase').value) / 100;
            const otherIncome = parseFloat(document.getElementById('other-income').value);
            const otherIncomeIncrease = parseFloat(document.getElementById('other-income-increase').value) / 100;
            const vacancyPct = parseFloat(document.getElementById('vacancy-rate').value) / 100;
            const managementPct = parseFloat(document.getElementById('management-fee').value) / 100;
            const knowSellPrice = document.getElementById('know-sell-price').value === 'yes';
            const appreciation = parseFloat(document.getElementById('appreciation').value) / 100;
            const sellPrice = knowSellPrice ? parseFloat(document.getElementById('sell-price').value) : price * Math.pow(1 + appreciation, parseInt(document.getElementById('holding-length').value));
            const holdingLength = parseInt(document.getElementById('holding-length').value);
            const sellCostPct = parseFloat(document.getElementById('sell-cost').value) / 100;

            const downPayment = price * downPct;
            const loan = useLoan ? price - downPayment : 0;
            const monthlyMortgage = useLoan ? loan * (rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1) : 0;

            let totalCashFlow = 0;
            let yearlyExpenses = [];
            let yearlyIncome = [];
            let yearlyNOI = [];
            for (let year = 1; year <= holdingLength; year++) {
                const currentTaxes = taxes * Math.pow(1 + taxesIncrease, year - 1);
                const currentInsurance = insurance * Math.pow(1 + insuranceIncrease, year - 1);
                const currentHOA = hoa * Math.pow(1 + hoaIncrease, year - 1);
                const currentRent = rent * Math.pow(1 + rentIncrease, year - 1);
                const currentMaint = currentRent * maintPct * Math.pow(1 + maintIncrease, year - 1);
                const currentOtherCosts = otherCosts * Math.pow(1 + otherCostsIncrease, year - 1);
                const currentOtherIncome = otherIncome * Math.pow(1 + otherIncomeIncrease, year - 1);
                const currentManagement = currentRent * managementPct;

                const effectiveRent = (currentRent + currentOtherIncome) * (1 - vacancyPct);
                const monthlyExpenses = monthlyMortgage + currentTaxes + currentInsurance + currentHOA + currentMaint + currentOtherCosts + currentManagement;
                const cashFlow = effectiveRent - monthlyExpenses;

                yearlyExpenses.push(monthlyExpenses * 12);
                yearlyIncome.push(effectiveRent * 12);
                yearlyNOI.push((effectiveRent - (currentTaxes + currentInsurance + currentHOA + currentMaint + currentOtherCosts + currentManagement)) * 12);
                totalCashFlow += cashFlow * 12;
            }

            const initialInvestment = downPayment + closingCost + repairCost;
            const noi = yearlyNOI[0];
            const capRate = (noi / (needRepairs ? afterRepairValue : price)) * 100;
            const roi = (totalCashFlow / holdingLength / initialInvestment) * 100;
            const sellCost = sellPrice * sellCostPct;
            const totalReturn = totalCashFlow + (sellPrice - sellCost - loan);

            // Simple IRR approximation
            let irr = 0;
            let npv = 0;
            for (let i = -1; i < holdingLength; i++) {
                const cashFlow = i === -1 ? -initialInvestment : (i === holdingLength - 1 ? yearlyNOI[i] + (sellPrice - sellCost - loan) : yearlyNOI[i]);
                npv += cashFlow / Math.pow(1 + irr, i + 1);
            }
            for (let r = 0; r < 0.5; r += 0.001) {
                let testNpv = 0;
                for (let i = -1; i < holdingLength; i++) {
                    const cashFlow = i === -1 ? -initialInvestment : (i === holdingLength - 1 ? yearlyNOI[i] + (sellPrice - sellCost - loan) : yearlyNOI[i]);
                    testNpv += cashFlow / Math.pow(1 + r, i + 1);
                }
                if (Math.abs(testNpv) < Math.abs(npv)) {
                    npv = testNpv;
                    irr = r;
                }
            }

            document.getElementById('monthly-mortgage').textContent = `Monthly Mortgage: ${currency}${monthlyMortgage.toFixed(2)}`;
            document.getElementById('monthly-cash-flow').textContent = `Monthly Cash Flow: ${currency}${(yearlyIncome[0] / 12 - yearlyExpenses[0] / 12).toFixed(2)}`;
            document.getElementById('cap-rate').textContent = `Cap Rate: ${capRate.toFixed(2)}%`;
            document.getElementById('annual-roi').textContent = `Annual ROI: ${roi.toFixed(2)}%`;
            document.getElementById('irr').textContent = `Internal Rate of Return (IRR): ${(irr * 100).toFixed(2)}%`;
            document.getElementById('total-return').textContent = `Total Return Over Term: ${currency}${totalReturn.toFixed(2)}`;

            document.getElementById('results').style.display = 'block';
            document.getElementById('pdf-button').style.display = 'block';

            // Amortization
            amortizationData = [];
            let balance = loan;
            let totalPrincipal = 0;
            let totalInterest = 0;
            const tableBody = document.querySelector('#amortization-table tbody');
            tableBody.innerHTML = '';
            document.getElementById('amortization-table').style.display = 'table';

            for (let year = 1; year <= (useLoan ? document.getElementById('loan-term').value : 1); year++) {
                let yearlyPrincipal = 0;
                let yearlyInterest = 0;
                for (let month = 1; month <= 12 && balance > 0; month++) {
                    const interest = balance * rate;
                    const principal = monthlyMortgage - interest;
                    balance -= principal;
                    yearlyPrincipal += principal;
                    yearlyInterest += interest;
                }
                totalPrincipal += yearlyPrincipal;
                totalInterest += yearlyInterest;
                amortizationData.push([year, currency + yearlyPrincipal.toFixed(2), currency + yearlyInterest.toFixed(2), currency + balance.toFixed(2)]);
                const row = document.createElement('tr');
                row.innerHTML = `<td>${year}</td><td>${currency}${yearlyPrincipal.toFixed(2)}</td><td>${currency}${yearlyInterest.toFixed(2)}</td><td>${currency}${balance.toFixed(2)}</td>`;
                tableBody.appendChild(row);
            }

            // Charts
            expenseData = [monthlyMortgage, taxes, insurance, hoa, rent * maintPct, otherCosts, rent * managementPct, rent * vacancyPct];
            const expenseCtx = document.getElementById('expenseChart').getContext('2d');
            new Chart(expenseCtx, {
                type: 'pie',
                data: {
                    labels: ['Mortgage', 'Taxes', 'Insurance', 'HOA', 'Maintenance', 'Other Costs', 'Management', 'Vacancy Loss'],
                    datasets: [{ data: expenseData, backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40', '#C9CBCF', '#36A2EB'] }]
                },
                options: { responsive: true, plugins: { title: { display: true, text: 'First Year Expense Breakdown' } } }
            });

            cashFlowData = [];
            for (let i = 0; i < holdingLength; i++) {
                cashFlowData.push(yearlyIncome[i] - yearlyExpenses[i]);
            }
            const cashFlowCtx = document.getElementById('cashFlowChart').getContext('2d');
            new Chart(cashFlowCtx, {
                type: 'line',
                data: {
                    labels: Array.from({length: holdingLength}, (_, i) => `Year ${i+1}`),
                    datasets: [{ label: 'Annual Cash Flow', data: cashFlowData, borderColor: '#36A2EB' }]
                },
                options: { responsive: true, plugins: { title: { display: true, text: 'Cash Flow Over Time' } } }
            });

            valueData = [];
            for (let i = 0; i < holdingLength; i++) {
                valueData.push((needRepairs ? afterRepairValue : price) * Math.pow(1 + appreciation, i));
            }
            const valueCtx = document.getElementById('valueChart').getContext('2d');
            new Chart(valueCtx, {
                type: 'line',
                data: {
                    labels: Array.from({length: holdingLength}, (_, i) => `Year ${i+1}`),
                    datasets: [{ label: 'Property Value', data: valueData, borderColor: '#FF6384' }]
                },
                options: { responsive: true, plugins: { title: { display: true, text: 'Property Value Over Time' } } }
            });

            // New Chart: NOI Bar Chart
            noiData = yearlyNOI;
            const noiCtx = document.getElementById('noiChart').getContext('2d');
            new Chart(noiCtx, {
                type: 'bar',
                data: {
                    labels: Array.from({length: holdingLength}, (_, i) => `Year ${i+1}`),
                    datasets: [{ label: 'Net Operating Income', data: noiData, backgroundColor: '#4BC0C0' }]
                },
                options: { responsive: true, plugins: { title: { display: true, text: 'Net Operating Income Over Years' } } }
            });

            // New Chart: ROI Components Doughnut
            roiComponentsData = [totalCashFlow, (sellPrice - sellCost - loan), -initialInvestment];
            const roiComponentsCtx = document.getElementById('roiComponentsChart').getContext('2d');
            new Chart(roiComponentsCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Total Cash Flow', 'Sale Profit', 'Initial Investment'],
                    datasets: [{ data: roiComponentsData.map(Math.abs), backgroundColor: ['#36A2EB', '#FFCE56', '#FF6384'] }]
                },
                options: { responsive: true, plugins: { title: { display: true, text: 'ROI Components Breakdown' } } }
            });
        }

        function saveAsPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const currency = document.getElementById('currency').value;

            doc.setFont("helvetica");
            doc.setFontSize(14);
            doc.text("Rental Property ROI Calculator Results", 105, 15, { align: "center" });

            // Results Table
            doc.autoTable({
                startY: 20,
                head: [['Parameter', 'Value']],
                body: [
                    ['Monthly Mortgage', document.getElementById('monthly-mortgage').textContent.split(': ')[1]],
                    ['Monthly Cash Flow', document.getElementById('monthly-cash-flow').textContent.split(': ')[1]],
                    ['Cap Rate', document.getElementById('cap-rate').textContent.split(': ')[1]],
                    ['Annual ROI', document.getElementById('annual-roi').textContent.split(': ')[1]],
                    ['Internal Rate of Return (IRR)', document.getElementById('irr').textContent.split(': ')[1]],
                    ['Total Return Over Term', document.getElementById('total-return').textContent.split(': ')[1]]
                ],
                theme: 'grid',
                headStyles: { fillColor: [0, 200, 200], textColor: [255, 255, 255] },
                alternateRowStyles: { fillColor: [255, 255, 255] },
                styles: { lineColor: [200, 200, 200], lineWidth: 0.1, cellPadding: 3, font: "helvetica", halign: 'left' },
                margin: { top: 10 }
            });

            // Amortization Table
            doc.autoTable({
                startY: doc.lastAutoTable.finalY + 10,
                head: [['Year', 'Principal Paid', 'Interest Paid', 'Balance']],
                body: amortizationData,
                theme: 'grid',
                headStyles: { fillColor: [0, 200, 200], textColor: [255, 255, 255] },
                alternateRowStyles: { fillColor: [245, 245, 245] },
                styles: { lineColor: [200, 200, 200], lineWidth: 0.1, cellPadding: 3, font: "helvetica", halign: 'left' },
                didDrawPage: function (data) {
                    doc.setFontSize(10);
                    doc.setTextColor(100);
                    doc.text('This document was generated using Fcalculator.com', doc.internal.pageSize.width / 2, doc.internal.pageSize.height - 10, { align: 'center' });
                }
            });

            doc.save('rental-property-roi-results.pdf');
        }

        function sharePage() {
            if (navigator.share) {
                navigator.share({
                    title: 'Rental Property ROI Calculator',
                    url: window.location.href
                });
            } else {
                alert('Share this page manually.');
            }
        }

        // Auto-calculate on page load
        window.onload = function() {
            calculateRental();
        };
    </script>
</body>
</html>
