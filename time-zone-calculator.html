<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Zone Calculator - Enhanced Tool for Cross-Continental Time Alignment</title>
    <meta name="description" content="Leverage this sophisticated time zone calculator for precise conversions and comparisons across international boundaries. Featuring dynamic hourly visualizations, overlap suggestions for meetings, and adjustments for daylight saving variations, it supports global professionals in synchronizing schedules with UTC precision and historical context.">
    <link rel="stylesheet" href="https://fcalculator.com/css/style.css">
    <style>
        /* Dodatni inline CSS za unikatan izgled, ali glavni je iz style.css */
        .time-table { width: 100%; border-collapse: collapse; margin: 20px 0; overflow-x: auto; }
        .time-table th, .time-table td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        .time-table th { background-color: #020202; color: white; }
        .day { background-color: #e6ffe6; } /* Light green for day/working hours */
        .night { background-color: #f0f0f0; } /* Gray for night */
        .slider { width: 100%; margin: 20px 0; }
        .result { color: green; font-weight: bold; }
        #locationsList { margin: 10px 0; }
        .location-item { display: flex; align-items: center; margin-bottom: 5px; }
        .location-item button { margin-left: 10px; }
    </style>
</head>
<body>
    <header>
        <h1>Time Zone Calculator</h1>
        <p>Engage with the nuances of planetary time division through this advanced calculator, crafted to execute conversions between disparate time zones with consideration for UTC baselines, seasonal daylight adjustments, and longitudinal variances. It equips users in fields like international trade, aerospace navigation, and cross-border research to achieve seamless temporal harmony.</p>
    </header>

    <main>
        <section>
            <h2>Historical Development and Operational Principles of Time Zones</h2>
            <p>The establishment of time zones traces back to the late 19th century, prompted by the proliferation of rail networks and telegraph systems that demanded a departure from localized solar reckonings. Pioneered by figures such as Sir Sandford Fleming, the framework segmented the Earth into 24 longitudinal bands, each ideally encompassing 15 degrees, anchored to the Greenwich Prime Meridian as the UTC zero point.</p>
            <p>In today's interconnected landscape, time zones underpin essential infrastructures: synchronized clocks drive stock market transactions, while precise offsets enable satellite constellation management. The incorporation of cesium atomic clocks and occasional leap second insertions maintains accuracy down to nanoseconds, crucial for systems like global positioning and algorithmic trading platforms.</p>
            <p>Daylight saving mechanisms, first implemented amid energy shortages in World War I, introduce periodic shifts in numerous jurisdictions, including much of Europe and North America, to extend evening daylight. This tool adapts to these fluctuations, drawing from standardized international databases to ensure reliable outputs across over 400 recognized zones.</p>
            <p>Professionals harness such conversions to streamline remote collaborations, averting scheduling conflicts in distributed teams. For voyagers, it facilitates physiological adaptations to new chronobiological environments, alleviating disruptions from transmeridian travel. In scientific endeavors, it standardizes timestamps for data integrity in multinational experiments.</p>
            <p>At its core, the mathematics of conversion subtracts source offsets from target ones relative to UTC: time in destination = source time + (target_offset - source_offset). Exemplifying this, shifting from Central European Time (UTC +1) to Eastern Daylight Time (UTC -4) entails a -5 hour modification, with safeguards for date boundary crossings via modular operations.</p>
            <!-- Mali share button u tekstu -->
            <button onclick="shareResults()" style="background-color: #4CAF50; color: white; border: none; padding: 5px 10px; cursor: pointer;">Share this Analysis</button>
        </section>

        <section>
            <h2>Mastering the Time Zone Calculator Interface</h2>
            <p>Initiate by reviewing the pre-loaded locations (Berlin, New York, Tokyo), then search to add more cities or zones with enhanced recognition for global entries. Reorder or remove as required, and manipulate the slider to explore shifted timelines. The resulting table depicts 24-hour progressions color-coded for daylight and nocturnal periods, complemented by automated suggestions for overlapping slots suitable for virtual gatherings.</p>
            <form id="timeForm">
                <label for="searchLocation">Search and Add Location (City or Time Zone):</label>
                <input type="text" id="searchLocation" placeholder="e.g., Brasilia, Bucharest, or CET">
                <button type="button" onclick="addLocation()">Add</button>
                
                <div id="locationsList"></div>
                
                <label for="timeSlider">Time Slider (shift hours):</label>
                <input type="range" id="timeSlider" class="slider" min="-12" max="12" value="0" oninput="updateTable()">
                
                <button type="button" onclick="updateTable()">Refresh</button>
            </form>
            
            <div id="results">
                <h3>Time Zone Comparison</h3>
                <div id="timeTableContainer" style="overflow-x: auto;"></div>
                <div id="suggestedMeetings" style="margin-top: 20px;">
                    <h4>Suggested Meeting Times (Overlaps in Working Hours)</h4>
                    <ul id="meetingList"></ul>
                </div>
            </div>
        </section>

        <section>
            <h2>Illustrative Scenarios in Global Time Coordination</h2>
            <p>Within a transnational enterprise based in Berlin (UTC +2 during summer), aligning with counterparts in New York (UTC -4) and Tokyo (UTC +9) necessitates additions of -6 hours and +7 hours, respectively, frequently yielding compromise windows in overlapping afternoons or mornings.</p>
            <p>For coordinators of worldwide seminars, translating a 2:00 PM commencement in Brasilia (UTC -3) to attendees in Bucharest (UTC +3) results in 8:00 PM, underscoring the calculator's utility in enhancing participation through judicious timing selections.</p>
            <p>Internal links for related tools: <a href="/age.html">Age Calculator</a>, <a href="/safe-password-generator.html">Safe Password Generator</a>.</p>
        </section>

        <section>
            <h2>Related Resources</h2>
            <ul>
                <li><a href="https://en.wikipedia.org/wiki/Time_zone" target="_blank" rel="noopener noreferrer">Wikipedia: Time Zone - Extensive exploration of origins and implementations</a></li>
                <li><a href="https://www.nist.gov/pml/time-and-frequency-division" target="_blank" rel="noopener noreferrer">NIST: Time and Frequency Division - Official benchmarks for temporal accuracy</a></li>
                <li><a href="https://www.timeanddate.com/time/zones/" target="_blank" rel="noopener noreferrer">Timeanddate.com: Time Zone Abbreviations - Comprehensive worldwide catalog</a></li>
            </ul>
        </section>
    </main>

    <footer>
        Project created by Ivan Brkic. Project launched in 2020. Version 1.02
    </footer>

    <script>
        // Autor: Ivan Brkic
        // JS za enhanced time zone calculator, sa proširenom listom gradova i boljim searchom

        const timeZones = [
            { city: "New York", zone: "America/New_York", offset: "-4:00" }, // EDT in Aug 2025
            { city: "Berlin", zone: "Europe/Berlin", offset: "+2:00" }, // CEST
            { city: "Tokyo", zone: "Asia/Tokyo", offset: "+9:00" },
            { city: "Sydney", zone: "Australia/Sydney", offset: "+10:00" },
            { city: "Moscow", zone: "Europe/Moscow", offset: "+3:00" },
            { city: "Beijing", zone: "Asia/Shanghai", offset: "+8:00" },
            { city: "Los Angeles", zone: "America/Los_Angeles", offset: "-7:00" }, // PDT
            { city: "Paris", zone: "Europe/Paris", offset: "+2:00" },
            { city: "Dubai", zone: "Asia/Dubai", offset: "+4:00" },
            { city: "Bucharest", zone: "Europe/Bucharest", offset: "+3:00" }, // EEST
            { city: "Brasilia", zone: "America/Sao_Paulo", offset: "-3:00" },
            { city: "London", zone: "Europe/London", offset: "+1:00" }, // BST
            { city: "New Delhi", zone: "Asia/Kolkata", offset: "+5:30" },
            { city: "Cape Town", zone: "Africa/Johannesburg", offset: "+2:00" },
            { city: "Rio de Janeiro", zone: "America/Sao_Paulo", offset: "-3:00" },
            { city: "Mexico City", zone: "America/Mexico_City", offset: "-5:00" }, // CDT
            { city: "Toronto", zone: "America/Toronto", offset: "-4:00" },
            { city: "Singapore", zone: "Asia/Singapore", offset: "+8:00" },
            { city: "Hong Kong", zone: "Asia/Hong_Kong", offset: "+8:00" },
            { city: "Seoul", zone: "Asia/Seoul", offset: "+9:00" },
            // Dodano više za bolji search i pokrivenost
        ];

        let locations = [];
        let currentTime = new Date();

        function detectCurrentZone() {
            const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
            const city = tz.split('/')[1]?.replace('_', ' ') || 'UTC';
            addLocation(city, true); // Fallback ako nije u listi
        }

        function addLocation(searchTerm = document.getElementById('searchLocation').value, silent = false) {
            if (!searchTerm) return;
            let found = timeZones.find(z => z.city.toLowerCase() === searchTerm.toLowerCase() || z.zone.toLowerCase().includes(searchTerm.toLowerCase()));
            if (!found) {
                // Fuzzy search: traži sličan
                found = timeZones.find(z => z.city.toLowerCase().includes(searchTerm.toLowerCase()));
            }
            if (!found) found = { city: searchTerm, zone: 'UTC', offset: '0:00' }; // Ultimate fallback
            if (!locations.some(loc => loc.city.toLowerCase() === found.city.toLowerCase())) {
                locations.push(found);
                renderLocations();
                updateTable();
            }
            if (!silent) document.getElementById('searchLocation').value = '';
        }

        function renderLocations() {
            const list = document.getElementById('locationsList');
            list.innerHTML = '';
            locations.forEach((loc, index) => {
                const div = document.createElement('div');
                div.className = 'location-item';
                div.innerHTML = `
                    <span>${loc.city} (${loc.offset})</span>
                    <button onclick="moveUp(${index})">Up</button>
                    <button onclick="moveDown(${index})">Down</button>
                    <button onclick="removeLocation(${index})">Remove</button>
                `;
                list.appendChild(div);
            });
        }

        function moveUp(index) {
            if (index > 0) {
                [locations[index-1], locations[index]] = [locations[index], locations[index-1]];
                renderLocations();
                updateTable();
            }
        }

        function moveDown(index) {
            if (index < locations.length - 1) {
                [locations[index], locations[index+1]] = [locations[index+1], locations[index]];
                renderLocations();
                updateTable();
            }
        }

        function removeLocation(index) {
            locations.splice(index, 1);
            renderLocations();
            updateTable();
        }

        function parseOffset(offsetStr) {
            const sign = offsetStr.startsWith('-') ? -1 : 1;
            const [hours, minutes] = offsetStr.replace(/[+-]/, '').split(':').map(Number);
            return sign * ((hours || 0) * 60 + (minutes || 0));
        }

        function updateTable() {
            if (locations.length === 0) return;

            const sliderValue = parseInt(document.getElementById('timeSlider').value);
            const baseTime = new Date(currentTime.getTime() + sliderValue * 3600000);

            const container = document.getElementById('timeTableContainer');
            container.innerHTML = '';

            const table = document.createElement('table');
            table.className = 'time-table';

            // Header row with hours
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            headerRow.innerHTML = '<th>Location</th>';
            for (let h = 0; h < 24; h++) {
                const th = document.createElement('th');
                th.textContent = `${(h % 12) || 12} ${h < 12 ? 'AM' : 'PM'}`;
                headerRow.appendChild(th);
            }
            thead.appendChild(headerRow);
            table.appendChild(thead);

            const tbody = document.createElement('tbody');

            locations.forEach(loc => {
                const row = document.createElement('tr');
                row.innerHTML = `<td class="result">${loc.city}</td>`;
                
                const locOffset = parseOffset(loc.offset);
                for (let h = 0; h < 24; h++) {
                    const td = document.createElement('td');
                    const hourTime = new Date(baseTime.getTime() + (h * 3600000) - (locOffset * 60000)); // Corrected adjustment for local time
                    td.textContent = hourTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    const localHour = hourTime.getHours();
                    td.className = (localHour >= 8 && localHour < 18) ? 'day' : 'night'; // Based on local hour
                    td.onclick = () => scheduleEvent(loc.city, hourTime);
                    row.appendChild(td);
                }
                tbody.appendChild(row);
            });

            table.appendChild(tbody);
            container.appendChild(table);

            suggestMeetings();
        }

        function scheduleEvent(city, time) {
            alert(`Scheduled event in ${city} at ${time.toLocaleString()}. Share via link or calendar.`);
            // Možeš dodati više, npr. generate ICS
        }

        function suggestMeetings() {
            const list = document.getElementById('meetingList');
            list.innerHTML = '';
            // Improved logic: find common day hours across locations
            for (let h = 0; h < 24; h++) {
                const isOverlap = locations.every(loc => {
                    const locOffset = parseOffset(loc.offset);
                    const adjustedH = (h + (locOffset / 60)) % 24;
                    return adjustedH >= 8 && adjustedH < 18;
                });
                if (isOverlap) {
                    const li = document.createElement('li');
                    li.textContent = `Suggested: ${h}:00 (UTC) - Overlap in working hours for all locations`;
                    list.appendChild(li);
                }
            }
        }

        function shareResults() {
            if (navigator.share) {
                navigator.share({
                    title: 'Time Zone Comparison',
                    text: 'View my international time alignment!',
                    url: window.location.href
                });
            } else {
                alert('Share not supported');
            }
        }

        // Init with defaults: Berlin, New York, Tokyo
        addLocation('Berlin', true);
        addLocation('New York', true);
        addLocation('Tokyo', true);
        detectCurrentZone(); // Optional addition if needed
        setInterval(() => { currentTime = new Date(); updateTable(); }, 60000); // Live update
        updateTable();
    </script>
</body>
</html>
